{% extends "barra_l.html" %}
{% block title %}Ficheros CSV{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-6">üìÅ Ficheros CSV disponibles</h1>

<div class="overflow-x-auto">
  <table class="min-w-full bg-white shadow-md rounded border border-gray-200">
    <thead class="bg-gray-100 text-gray-600 text-sm uppercase">
    <tr>
      <th class="py-3 px-6 text-left">Archivo</th>
      <th class="py-3 px-6 text-left">Tama√±o</th>
      <th class="py-3 px-6 text-left">√öltima modificaci√≥n</th>
      <th class="py-3 px-6 text-center">Acci√≥n</th>
    </tr>
    </thead>
    <tbody class="text-gray-700 text-sm">
    {% for archivo in archivos %}
    <tr class="border-b hover:bg-gray-50">
      <td class="py-3 px-6">{{ archivo.nombre }}</td>
      <td class="py-3 px-6">{{ archivo.tamano }} KB</td>
      <td class="py-3 px-6">{{ archivo.modificado }}</td>
      <td class="py-3 px-6 text-center">
        <div class="flex flex-wrap gap-3 justify-center items-center">

          <!-- Ver -->
          <a href="{{ url_for('csv_bp.ver_csv', nombre=archivo.nombre) }}"
             class="text-blue-600 hover:underline">üîç Ver</a>

          <!-- Aplicar -->
          <form action="{{ url_for('csv_bp.aplicar_csv', nombre=archivo.nombre) }}" method="post" style="display:inline">
            <button type="submit" class="text-green-600 hover:underline bg-transparent border-none p-0">
              ‚úÖ Aplicar
            </button>
          </form>

          <!-- Eliminar -->
          <form action="{{ url_for('csv_bp.eliminar_csv', nombre=archivo.nombre) }}" method="post"
                onsubmit="return confirm('¬øEst√°s seguro de que deseas eliminar {{ archivo.nombre }}?');"
                style="display:inline">
            <button type="submit" class="text-red-600 hover:underline bg-transparent border-none p-0">
              üóëÔ∏è Eliminar
            </button>
          </form>
        </div>
      </td>
    </tr>
    {% endfor %}
    </tbody>
  </table>
  <a href="{{ url_for('csv_bp.subir_csv_form') }}"
     class="inline-block bg-green-600 text-white px-4 py-2 rounded hover:bg-blue-700 ">
    A√±adir fichero
  </a>
</div>
{% endblock %}